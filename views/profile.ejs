<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css2?family=Mali:wght@500&display=swap" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
    integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css2?family=Bungee+Inline&display=swap" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles/login.css" type="text/css" />
  <link rel="stylesheet" href="/styles/profile.css" type="text/css" />
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

  <title>
    <%= user.username %>
  </title>
</head>

<body>
  <!--importing navbar-->
  <%- include ('indexPartials/nav2') %>
    <section id="profile-main-section">
      <div>
        <img width=100% src="/images/bc-about.jpg" alt="">


      </div>
    </section>

    <section>
      <div class="profile__body px-5">
        <div class="container-fluid">
          <div class="row">
            <!----------------------------------------------------------------------->
            <div class="col-sm-12 col-lg-4" id="left">
              <%- include ('Partials/profileCard') %>
            </div>
            <!------------------------------------------------------------------------------->



            <!----col2 contains create post,recommendations,newsfeed-->
            <div class="col-12 col-lg-5 py-0 shadow rounded overflow-hidden" id="middle">
             



              <!------Create post--------------------------------------->
              <div class="row px-0" id="middle-row2">
                <%- include ('profilePartials/createPosts') %>
              </div>
              <!--------------------------------------------->


               <!------column that shows cards for recommended people------------------>
              <%if(recommendedUsers) {%>

                <!----or include /recommendedCards ------->
                <%- include('Partials/recommendedCards') %>
                  <%}else{%>
                    <h3>Nothing</h3>
                    <%}%>
                      <br />

                      <!-- option -->
                      <div class="px-0 options shadow rounded overflow-hidden">
                        <a class="active" href="/profile/newsfeed"><i class="far fa-newspaper"></i> Newsfeed</a>
                        <a href="/profile/detailedProfile"><i class="fas fa-user-circle"></i>Profile</a>
                        <a href="/profile/date"><i class="fas fa-calendar-day"></i> Date</a>
                        <a href="/profile/match"><i class="fab fa-gratipay"></i> Match</a>
                      </div>
                      <%- include ('partials/messages') %>
                      <div>
                        <%- include('profilePartials/options') %>
                      </div>

                     
                    </div>
            <!-----------third column starts here----------------------------------------------------------->
            <div class="col-12 col-lg-3" id="right">
              <!---chat box-->
              <div class="card">
                <img class="card-img-top rounded" src="/images/intro.jpg" alt="Card image cap" />
                <div class="card-body">
                  <h5 class="card-title">Recent Chats</h5>
                  <p class="card-text">
                    Some quick example text to build on the card title and make
                    up the bulk of the card's content.
                  </p>
                  <a href="#" class="btn btn-primary" style="
                      color: rgb(255, 255, 255);
                      background-image: linear-gradient(
                        166deg,
                        #f22876 0%,
                        #942dd9 100%
                      );
                    ">See More Chats</a>
                </div>
              </div>
            </div>
            <!---------------------------------------------------------------------------------------------->
          </div>
        </div>

        <!---relocation button on bottom right corner------------------------------------------------------->
        <a href="" id="a3" onclick="return submit()"><img src="/images/location.png" class="img-fluid" style="
              border-radius: 50%;
              /* border: 1px solid black; */
              height: 70px;
              width: 70px;
              box-shadow: 7px 5px 10px rgb(161, 113, 250);
              position: fixed;
              bottom: 9px;
              right: 50px;
            " /></a>
        <!--------------------------------------------------------------------------------------------------------->
        <a href="#profile-main-section"  ><img src="https://cdn2.iconfinder.com/data/icons/gradient-purple-navigation-and-transactional-for-w/40/up-purp-512.png" class="img-fluid" style="
          border-radius: 50%;
          height: 70px;
          width: 70px;
          box-shadow: 7px 5px 10px rgb(161, 113, 250);
          position: fixed;
          bottom: 100px;
          right: 50px;
        " /></a>
      </div>
    </section>


    </div>


    
     <!-----Modal for creating Post------------------------------------------------------------------------------------------------------->
     <%- include ('profilePartials/modalForMatchFound') %>



    <!-----Modal for creating Post------------------------------------------------------------------------------------------------------->
    <%- include ('profilePartials/modalForCreatePost') %>


    <!-----Modal for scheduling Date------------------------------------------------------------------------------------------------------->
    <%- include ('profilePartials/modalForScheduleDate') %>

    <!-----Modal for profile------------------------------------------------------------------------------------------------------->
    


      <!--------------------------------------------------------------------------------------------------------->
      <%- include ('partials/footer') %>
      
</body>

<!-----script for match found modal-->
<script>
  var yes = "<%= popup %>";
  window.onload = function () {
    console.log("not inside if");
    console.log("popup=" + yes);
    if (yes == 1) {
      $("#myModal").modal("show");
      console.log("open");
    }
  };
</script>
<!-- Swiper JS -->
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<!-- Initialize Swiper -->
<script>

  //for recommended cards
  var swiper = new Swiper(".mySwiper", {
    slidesPerView: "auto",
    spaceBetween: 30,
    centeredSlides: true,
    grabCursor: true,
    loop: true,
    pagination: {
      el: ".swiper-pagination1",
      clickable: true,
    },
  });


  //for newsfeed images
  var swiper2 = new Swiper(".mySwiper2", {
    grabCursor: true,
    slidesPerView: "auto",
    spaceBetween: 10,
    centeredSlides: true,
    pagination: {
      el: ".swiper-pagination2 ",
    },
  });
</script>

<!------script for geolocation modal-->
<script>
  var lat, long, url;
  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(objectUse);
    } else {
      alert("no support");
    }
  }

  function objectUse(position) {
    lat = position.coords.latitude;
    long = position.coords.longitude;
    //alert("Allow website to access your location");
    //alert("Latitude:"+ lat +" Longitude:" + long);
    //console.log("/login/"+lat+"/"+long);
    href = "/location/changeLocation/" + lat + "/" + long;
    console.log(href);

    submit();
  }
  getLocation();
</script>

<!--script for relocation-->
<script>
  function submit() {
    document.getElementById("a3").href = href;
    return true;
  }
</script>


<!-- script for date schedulemodal -->
<script>
  var matchid,formurl;
  function setactionval(matid){
    matchid=matid;
    console.log(matchid);
    formurl="/scheduleDate/request/"+matchid;
    console.log(formurl);
    $("#dateRequest").attr("action", formurl);
}

//   $('#dateModalCenter').on('show.bs.modal', function (event) {
//     var matchid = $(event.relatedTarget).data('matchid');
//     console.log(matchid);
//     $(e.currentTarget).find(.dateRequest).val(bookId);
// //document.getElementById("dateRequest").action = matchid;
//     // $(".oEbutn").click(function() {
//     // $(this).closest("form").attr("action", "/shop/extras.php");       
// //});
//   });
</script>


<script>
    function toggle(IDS) {
      //var tagId='c-'+ IDS;
      //var sel = document.getElementById(tagId);
      //console.log(sel);
       
       var confirmTag=document.getElementById('pg0');
       var reqTag=document.getElementById('pg1');
       var recTag=document.getElementById('pg2');
     
      var status = document.getElementById(IDS).style.display;
      if (status == 'unset') 
      { 
        document.getElementById(IDS).style.display = 'none'; 
      }
      else
      {                 
       if(IDS=='pg0')
       {
           confirmTag.style.display='unset';
           reqTag.style.display='none';
           recTag.style.display='none';
       }
       else if(IDS=='pg1')
       {
           confirmTag.style.display='none';
           reqTag.style.display='unset';
           recTag.style.display='none';
       }
       else if(IDS=='pg2')
       {
           confirmTag.style.display='none';
           reqTag.style.display='none';
           recTag.style.display='unset';
       }

      }
      
      return false;
    }
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function(event) { 
          var scrollpos = localStorage.getItem('scrollpos');
          if (scrollpos) window.scrollTo(0, scrollpos);
      });

      window.onbeforeunload = function(e) {
          localStorage.setItem('scrollpos', window.scrollY);
      };
  </script>
  <!-- <script>
   tinymce.get("mytextarea").getContent({ format: "text" });
  </script> -->

<!-- <script src="/js/profile.js"></script> -->

<script src="https://kit.fontawesome.com/fba7a05067.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
  integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
  integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

</html>