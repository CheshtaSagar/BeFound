<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css2?family=Mali:wght@500&display=swap" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
    integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css2?family=Bungee+Inline&display=swap" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/styles/login.css" type="text/css" />
  <link rel="stylesheet" href="/styles/profile.css" type="text/css" />
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

  <title>
    <%= user.username %>
  </title>
</head>

<body>
  <!--importing navbar-->
  <%- include ('indexPartials/nav2') %>
    <section>
      <div>
        <img src="/images/bc-about.jpg" alt="">


      </div>
    </section>

    <section>
      <div class="profile__body px-5">
        <div class="container-fluid">
          <div class="row">
            <!----------------------------------------------------------------------->
            <div class="col-12 col-lg-4" id="left">
              <%- include ('Partials/profileCard') %>
            </div>
            <!------------------------------------------------------------------------------->



            <!----col2-->
            <div class="col-12 col-lg-5 py-0 shadow rounded overflow-hidden" id="middle">
              <!------column that shows cards for recommended people------------------>



              <!------Create post--------------------------------------->
              <div class="row" id="middle-row2">
                <%- include ('Partials/createPosts') %>
              </div>
              <!--------------------------------------------->


              <%if(recommendedUsers) {%>

                <!----or include /recommendedCards ------->
                <%- include('Partials/recommendedCards') %>
                  <%}else{%>
                    <h3>Nothing</h3>
                    <%}%>
                      <br />

                      <!-- option -->
                      <div class="options shadow rounded overflow-hidden">
                        <a class="active" href="/profile/newsfeed"><i class="far fa-newspaper"></i> Newsfeed</a>
                        <a href="/profile/detailedProfile"><i class="fas fa-user-circle"></i>Profile</a>
                        <a href="/profile/date"><i class="fas fa-calendar-day"></i> Date</a>
                        <a href="/profile/match"><i class="fab fa-gratipay"></i> Match</a>
                      </div>

                      <div>
                        <%- include('profilePartials/options') %>
                      </div>

                      <!-----rows that will show newsfeed- entry1-----loop will be used here--------------->
                      <!-- <div class="row" id="middle-row2">
              <div class="col">
                <div class="card text-center">
                  <div class="card-body">
                    <h5 class="card-title">News Feed</h5>
                    <p class="card-text">
                      With supporting text below as a natural lead-in to
                      additional content.
                    </p>
                    <a href="#" class="btn btn-primary">Go somewhere</a>
                  </div>
                  <div class="card-footer text-muted">2 days ago</div>
                </div>
              </div>
            </div> -->

                      <!------------news feed entry 2-->
                      <!-- <div class="row" id="middle-row2">
              <div class="col">
                <div class="card text-center">
                  <div class="card-body">
                    <h5 class="card-title">News Feed</h5>
                    <p class="card-text">
                      With supporting text below as a natural lead-in to
                      additional content.
                    </p>
                    <a href="#" class="btn btn-primary">Go somewhere</a>
                  </div>
                  <div class="card-footer text-muted">2 days ago</div>
                </div>
              </div>
            </div> -->
            </div>

            <!-----------third column starts here----------------------------------------------------------->
            <div class="col-12 col-lg-3" id="right">
              <!---chat box-->
              <div class="card">
                <img class="card-img-top rounded" src="/images/intro.jpg" alt="Card image cap" />
                <div class="card-body">
                  <h5 class="card-title">Recent Chats</h5>
                  <p class="card-text">
                    Some quick example text to build on the card title and make
                    up the bulk of the card's content.
                  </p>
                  <a href="#" class="btn btn-primary" style="
                      color: rgb(255, 255, 255);
                      background-image: linear-gradient(
                        166deg,
                        #f22876 0%,
                        #942dd9 100%
                      );
                    ">See More Chats</a>
                </div>
              </div>
            </div>
            <!---------------------------------------------------------------------------------------------->
          </div>
        </div>

        <!---relocation button on bottom right corner------------------------------------------------------->
        <a href="" id="a3" onclick="return submit()"><img src="/images/location.png" class="img-fluid" style="
              border-radius: 50%;
              border: 1px solid black;
              height: 70px;
              width: 70px;
              box-shadow: 7px 5px 10px rgb(161, 113, 250);
              position: fixed;
              bottom: 9px;
              right: 50px;
            " /></a>
        <!--------------------------------------------------------------------------------------------------------->
      </div>
    </section>

   
  

    </div>


    <!--Modal for match found popup---------------------------------------------------------------------------->
    <div class="modal" tabindex="-1" role="dialog" id="myModal">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header" style="
              background-color: #4e2cca;
              padding-left: 40%;
              justify-content: center;
            ">
            <h5 class="modal-title" style="
                font-family: 'Libre Baskerville', serif;
                color: cornsilk;
                font-style: bold;
              ">
              Match Found
            </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="match">

              <% if (user.displayPicture) {%>
                <img src="/image/<%= user.displayPicture %>" class="match-img" alt="altt">
                <%}else{%>
                  <img src="https://img1.pnghut.com/1/16/10/nrdkyKR0fe/symbol-figure-icon-portrait-customer-redm.jpg"
                    class="match-img" alt="altt">
                  <%}%>

                    <%if(likedUser!=null){%>

                      <% if (likedUser.displayPicture) {%>
                        <img src="/image/<%= likedUser.displayPicture %>" class="match-img" alt="altt">
                        <%}else{%>
                          <img
                            src="https://img1.pnghut.com/1/16/10/nrdkyKR0fe/symbol-figure-icon-portrait-customer-redm.jpg"
                            class="match-img" alt="altt">
                          <%}%>
                            <%}%>

            </div>
          </div>
          <div class="modal-footer" style="align-content: center; padding-right: 25%">
            <button type="button" id="popup-button1" class="btn">
              Start Conversation
            </button>
            <button type="button" id="popup-button2" class="btn" data-dismiss="modal">
              Later
            </button>
          </div>
        </div>
      </div>
    </div>




    <!-----Modal for creating Post------------------------------------------------------------------------------------------------------->
    <%- include ('partials/modalForCreatePost') %>


      <!--------------------------------------------------------------------------------------------------------->
      <%- include ('partials/footer') %>
      
</body>

<!-----script for match found modal-->
<script>
  var yes = "<%= popup %>";
  window.onload = function () {
    console.log("not inside if");
    console.log("popup=" + yes);
    if (yes == 1) {
      $("#myModal").modal("show");
      console.log("open");
    }
  };
</script>
<!-- Swiper JS -->
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<!-- Initialize Swiper -->
<script>
  var swiper = new Swiper(".mySwiper", {
    slidesPerView: "auto",
    spaceBetween: 30,
    centeredSlides: true,
    grabCursor: true,
    loop: true,
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
  });
</script>

<!------script for geolocation modal-->
<script>
  var lat, long, url;
  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(objectUse);
    } else {
      alert("no support");
    }
  }

  function objectUse(position) {
    lat = position.coords.latitude;
    long = position.coords.longitude;
    //alert("Allow website to access your location");
    //alert("Latitude:"+ lat +" Longitude:" + long);
    //console.log("/login/"+lat+"/"+long);
    href = "/location/changeLocation/" + lat + "/" + long;
    console.log(href);

    submit();
  }
  getLocation();
</script>

<!--script for relocation-->
<script>
  function submit() {
    document.getElementById("a3").href = href;
    return true;
  }
</script>

<script src="https://kit.fontawesome.com/fba7a05067.js" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
  integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
  integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

</html>